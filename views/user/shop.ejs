<%- include ('../layouts/header.ejs') %>


    <style>
        .wrapper {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: var(--border-radius-sm);
            background: var(--white);
            border: 1px solid var(--cultured);
            margin-bottom: 2em;
        }

        .filter-price {
            width: 100%;
            border: 0;
            padding: 10px 18px;
            margin: 0;
        }

        .price-title {
            position: relative;
            color: #fff;
            font-size: 14px;
            line-height: 1.2em;
            font-weight: 400;
        }

        .price-field {
            position: relative;
            width: 100%;
            height: 36px;
            box-sizing: border-box;
            padding-top: 25px;
            border-radius: 3px;
            display: flex;
            justify-content: center;
        }

        .price-field input[type=range] {
            position: absolute;
        }

        /* Reset style for input range */

        .price-field input[type=range] {
            width: 100%;
            height: 2px;
            border: 0;
            outline: 0;
            box-sizing: border-box;
            border-radius: 5px;
            pointer-events: none;
            -webkit-appearance: none;
        }

        .price-field input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
        }

        .price-field input[type=range]:active,
        .price-field input[type=range]:focus {
            outline: 0;
        }

        .price-field input[type=range]::-ms-track {
            width: 188px;
            height: 2px;
            border: 0;
            outline: 0;
            box-sizing: border-box;
            border-radius: 5px;
            pointer-events: none;
            background: transparent;
            border-color: transparent;
            color: transparent;
            border-radius: 5px;
        }

        /* Style toddler input range */

        .price-field input[type=range]::-webkit-slider-thumb {
            /* WebKit/Blink */
            position: relative;
            -webkit-appearance: none;
            margin: 0;
            border: 0;
            outline: 0;
            border-radius: 50%;
            height: 10px;
            width: 10px;
            margin-top: -4px;
            background-color: var(--ocean-green);

            cursor: pointer;
            cursor: pointer;
            pointer-events: all;
            z-index: 100;
        }

        .price-field input[type=range]::-moz-range-thumb {
            /* Firefox */
            position: relative;
            appearance: none;
            margin: 0;
            border: 0;
            outline: 0;
            border-radius: 50%;
            height: 10px;
            width: 10px;
            margin-top: -5px;
            background-color: var(--ocean-green);
            cursor: pointer;
            cursor: pointer;
            pointer-events: all;
            z-index: 100;
        }

        .price-field input[type=range]::-ms-thumb {
            /* IE */
            position: relative;
            appearance: none;
            margin: 0;
            border: 0;
            outline: 0;
            border-radius: 50%;
            height: 10px;
            width: 10px;
            margin-top: -5px;
            background-color: var(--ocean-green);
            cursor: pointer;
            cursor: pointer;
            pointer-events: all;
            z-index: 100;
        }

        /* Style track input range */

        .price-field input[type=range]::-webkit-slider-runnable-track {
            /* WebKit/Blink */
            width: 188px;
            height: 2px;
            cursor: pointer;
            background: var(--ocean-green);
            border-radius: 5px;
        }

        .price-field input[type=range]::-moz-range-track {
            /* Firefox */
            width: 188px;
            height: 2px;
            cursor: pointer;
            background: var(--ocean-green);
            border-radius: 5px;
        }

        .price-field input[type=range]::-ms-track {
            /* IE */
            width: 188px;
            height: 2px;
            cursor: pointer;
            background: var(--ocean-green);
            border-radius: 5px;
        }

        /* Style for input value block */

        .price-wrap {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            color: var(--onyx);
            font-size: var(--fs-6);
            line-height: 1.2em;
            font-weight: var(--weight-600);
            margin: 1em 0em;
        }

        .price-wrap-1,
        .price-wrap-2 {
            display: flex;
        }

        .price-title {
            margin-right: 5px;
            color: var(--onyx);
            font-size: var(--fs-5);
            font-weight: var(--weight-500);
        }

        .price-wrap_line {
            margin: 0 10px;
        }

        .price-wrap #one,
        .price-wrap #two {
            min-width: 30px;
            text-align: right;
            margin: 0;
            padding: 0;
            margin-right: 2px;
            background: 0;
            border: 0;
            outline: 0;
            color: var(--onyx);
            font-size: var(--fs-7);
            line-height: 1.2em;
            font-weight: var(--weight-600);
        }

        .price-wrap label {
            text-align: right;
        }

        /* Style for active state input */

        .price-field input[type=range]:hover::-webkit-slider-thumb {
            box-shadow: 0 0 0 0.5px #fff;
            transition-duration: 0.3s;
        }

        .price-field input[type=range]:active::-webkit-slider-thumb {
            box-shadow: 0 0 0 0.5px #fff;
            transition-duration: 0.3s;
        }



        /* loading  */

        .loading-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100px;
        }

        .loading-indicator .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .error-message {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100px;
            background-color: #f44336;
            color: white;
        }

        .error-message p {
            font-size: 16px;
        }
    </style>



    <main>

        <!--
      - PRODUCT
    -->

        <div class="product-container">

            <div class="container">

                <!--
              - SIDEBAR
                -->


                <!-- Rest of your HTML code -->
                <div class="sidebar  has-scrollbar" data-mobile-menu>
                    <!-- Filter bar  -->
                    <div class="wrapper">
                        <fieldset class="filter-price">
                            <span class="price-title">PRICE RANGE </span>
                            <div class="price-field">
                                <input type="range" min="100" max="5000" value="100" id="lower">
                                <input type="range" min="100" max="5000" value="5000" id="upper">
                            </div>
                            <div class="price-wrap">
                                <span class="price-title">FILTER</span>

                                <div class="price-wrap-1">
                                    <input id="one">
                                    <label for="one">₹</label>
                                </div>
                                <div class="price-wrap_line">-</div>
                                <div class="price-wrap-2">
                                    <input id="two">
                                    <label for="two">₹</label>
                                </div>
                            </div>
                        </fieldset>
                    </div>



                    <div class="product-showcase">

                        <h3 class="showcase-heading">best sellers</h3>

                        <div class="showcase-wrapper">

                            <div class="showcase-container" id="showcase-container">

                                <div class="showcase">

                                    <a href="#" class="showcase-img-box">
                                        <img src="./assets/images/products/1.jpg" alt="baby fabric shoes" width="75"
                                            height="75" class="showcase-img">
                                    </a>

                                    <div class="showcase-content">

                                        <a href="#">
                                            <h4 class="showcase-title">baby fabric shoes</h4>
                                        </a>

                                        <div class="showcase-rating">
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                        </div>

                                        <div class="price-box">
                                            <del>$5.00</del>
                                            <p class="price">$4.00</p>
                                        </div>

                                    </div>

                                </div>

                                <div class="showcase">

                                    <a href="#" class="showcase-img-box">
                                        <img src="./assets/images/products/2.jpg" alt="men's hoodies t-shirt"
                                            class="showcase-img" width="75" height="75">
                                    </a>

                                    <div class="showcase-content">

                                        <a href="#">
                                            <h4 class="showcase-title">men's hoodies t-shirt</h4>
                                        </a>
                                        <div class="showcase-rating">
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star-half-outline"></ion-icon>
                                        </div>

                                        <div class="price-box">
                                            <del>$17.00</del>
                                            <p class="price">$7.00</p>
                                        </div>

                                    </div>

                                </div>

                                <div class="showcase">

                                    <a href="#" class="showcase-img-box">
                                        <img src="./assets/images/products/3.jpg" alt="girls t-shirt"
                                            class="showcase-img" width="75" height="75">
                                    </a>

                                    <div class="showcase-content">

                                        <a href="#">
                                            <h4 class="showcase-title">girls t-shirt</h4>
                                        </a>
                                        <div class="showcase-rating">
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star-half-outline"></ion-icon>
                                        </div>

                                        <div class="price-box">
                                            <del>$5.00</del>
                                            <p class="price">$3.00</p>
                                        </div>

                                    </div>

                                </div>

                                <div class="showcase">

                                    <a href="#" class="showcase-img-box">
                                        <img src="./assets/images/products/4.jpg" alt="woolen hat for men"
                                            class="showcase-img" width="75" height="75">
                                    </a>

                                    <div class="showcase-content">

                                        <a href="#">
                                            <h4 class="showcase-title">woolen hat for men</h4>
                                        </a>
                                        <div class="showcase-rating">
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                            <ion-icon name="star"></ion-icon>
                                        </div>

                                        <div class="price-box">
                                            <del>$15.00</del>
                                            <p class="price">$12.00</p>
                                        </div>

                                    </div>

                                </div>

                            </div>



                        </div>

                    </div>


                </div>




                <!--
               - PRODUCT GRID
                 -->

                <div class="product-main">

                    <h2 class="title">Our Products</h2>

                    <div class="product-grid">

                    </div>

                    <div id="pagination-container">

                        <!-- loading  -->

                        <!-- HTML code for the loading indicator -->
                        <div class="loading-indicator">
                            <div class="spinner"></div>
                            <p>Loading...</p>
                        </div>

                        <!-- HTML code for the error message  -->

                        <div class="error-message">
                            <p class="error-text"></p>
                        </div>

                        <div class="error-message">
                            <p class="error-text"></p>
                        </div>



                    </div>



                </div>


            </div>

        </div>

    </main>


    <script>
        $(document).ready(function () {
            // Retrieve the search term from the query parameter
            const urlParams = new URLSearchParams(window.location.search);
            const searchTerm = urlParams.get('search');

            // Populate the search input field with the search term
            $('#search-input').val(searchTerm);

            // Execute the search functionality
            handleProductPaginationClick(1, searchTerm, null);
        });

        window.onload = async function () {
            // await getProducts()
            await getCategories()
        }
    </script>

    <script src="js/filter.js"></script>




    <%- include ('../layouts/footer.ejs') %>